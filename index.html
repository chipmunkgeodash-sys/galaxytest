<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Galaxy Games - Redesign</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg: radial-gradient(circle at top left, #111827, #020617 55%, #000000);
      --bg-panel: rgba(15,23,42,0.96);
      --accent: #38bdf8;
      --accent-soft: rgba(56,189,248,0.18);
      --accent-2: #a855f7;
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --border-subtle: rgba(148,163,184,0.3);
      --radius-lg: 18px;
      --shadow-soft: 0 24px 80px rgba(15,23,42,0.9);
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
      color: var(--text-main);
      background: var(--bg);
      background-attachment: fixed;
      display: flex;
      align-items: stretch;
      justify-content: center;
    }

    .app-shell {
      display: grid;
      grid-template-columns: 80px minmax(0, 1fr);
      max-width: 1200px;
      width: 100%;
      height: 100vh;
      padding: 18px;
      gap: 18px;
    }

    /* Sidebar */
    .sidebar {
      background: rgba(15,23,42,0.96);
      border-radius: 24px;
      border: 1px solid rgba(15,23,42,0.9);
      box-shadow: var(--shadow-soft);
      padding: 14px 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
    }

    .logo-circle {
      width: 42px;
      height: 42px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #38bdf8, #0f172a);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      letter-spacing: 0.04em;
      font-size: 1rem;
      box-shadow: 0 10px 30px rgba(56,189,248,0.35);
    }

    .side-nav {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 12px;
    }

    .side-nav button {
      all: unset;
      cursor: pointer;
      width: 40px;
      height: 40px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      color: var(--text-muted);
      transition: all 0.18s ease;
    }

    .side-nav button:hover {
      background: rgba(15,23,42,0.9);
      color: var(--text-main);
    }

    .side-nav button.active {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #0b1120;
      box-shadow: 0 10px 35px rgba(56,189,248,0.4);
    }

    .side-clock {
      text-align: center;
      font-size: 0.7rem;
      color: var(--text-muted);
      display: grid;
      gap: 2px;
    }

    .side-clock-time {
      font-size: 0.9rem;
      font-weight: 600;
      letter-spacing: 0.08em;
    }

    /* Main area */
    .main {
      background: var(--bg-panel);
      border-radius: 24px;
      border: 1px solid rgba(15,23,42,0.9);
      box-shadow: var(--shadow-soft);
      padding: 18px 22px 20px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      overflow: hidden;
    }

    .main-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
    }

    .brand-block {
      display: grid;
      gap: 4px;
    }

    .brand-title {
      font-size: 1.4rem;
      font-weight: 800;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .brand-subtitle {
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .pill-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      font-size: 0.75rem;
    }

    .pill {
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.35);
      background: rgba(15,23,42,0.9);
      color: var(--text-muted);
    }

    /* Top tab row */
    .top-tabs {
      display: inline-flex;
      padding: 4px;
      border-radius: 999px;
      background: rgba(15,23,42,0.7);
      border: 1px solid rgba(15,23,42,0.9);
    }

    .top-tabs button {
      all: unset;
      cursor: pointer;
      padding: 6px 14px;
      border-radius: 999px;
      font-size: 0.85rem;
      color: var(--text-muted);
      transition: all 0.16s;
    }

    .top-tabs button.active {
      background: radial-gradient(circle at top left, var(--accent), var(--accent-2));
      color: #020617;
      box-shadow: 0 10px 25px rgba(56,189,248,0.45);
      font-weight: 600;
    }

    /* Panels */
    .panel-shell {
      flex: 1;
      border-radius: 18px;
      background: radial-gradient(circle at top left, rgba(15,23,42,0.95), #020617);
      padding: 18px 18px 16px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .tab-panel {
      display: none;
      height: 100%;
      overflow: hidden;
    }

    .tab-panel.active {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    /* Home panel */
    .hero {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 18px;
      align-items: center;
    }

    .hero-title {
      font-size: 2rem;
      font-weight: 800;
      letter-spacing: 0.06em;
      text-transform: uppercase;
    }

    .hero-title span.accent {
      color: var(--accent);
    }

    .hero-sub {
      margin-top: 8px;
      font-size: 0.9rem;
      color: var(--text-muted);
      max-width: 380px;
    }

    .hero-actions {
      margin-top: 14px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    .btn-primary {
      padding: 0.7rem 1.4rem;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: radial-gradient(circle at top left, var(--accent), var(--accent-2));
      color: #020617;
      font-weight: 600;
      font-size: 0.9rem;
      box-shadow: 0 12px 30px rgba(56,189,248,0.45);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
    }

    .btn-ghost {
      padding: 0.6rem 1.1rem;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.4);
      background: transparent;
      color: var(--text-muted);
      cursor: pointer;
      font-size: 0.85rem;
    }

    .hero-card {
      border-radius: 20px;
      border: 1px solid rgba(148,163,184,0.35);
      background: linear-gradient(135deg, rgba(15,23,42,0.9), rgba(30,64,175,0.9));
      padding: 14px;
      display: grid;
      gap: 10px;
    }

    .hero-card-thumb {
      border-radius: 14px;
      background-image: url('https://images.pexels.com/photos/39501/lamborghini-brno-racing-car-automobiles-39501.jpeg?auto=compress&cs=tinysrgb&w=1200');
      background-size: cover;
      background-position: center;
      height: 150px;
    }

    .hero-card-title {
      font-weight: 600;
      font-size: 0.95rem;
    }

    .hero-card-meta {
      font-size: 0.8rem;
      color: var(--text-muted);
      display: flex;
      gap: 10px;
    }

    /* Games panel */
    .games-header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .games-title {
      font-size: 1.2rem;
      font-weight: 700;
    }

    .search-bar {
      position: relative;
      width: 260px;
      max-width: 100%;
    }

    .search-bar input {
      width: 100%;
      padding: 0.6rem 2rem 0.6rem 0.8rem;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.4);
      background: rgba(15,23,42,0.85);
      color: var(--text-main);
      font-size: 0.85rem;
    }

    .search-bar span {
      position: absolute;
      right: 0.7rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .game-list {
      margin-top: 14px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(210px, 1fr));
      gap: 12px;
      overflow: auto;
      padding-right: 4px;
    }

    .game-card {
      border-radius: 16px;
      border: 1px solid rgba(148,163,184,0.25);
      background: rgba(15,23,42,0.9);
      padding: 10px;
      display: grid;
      gap: 8px;
      cursor: pointer;
      transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease;
    }

    .game-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 35px rgba(15,23,42,0.9);
      border-color: var(--accent-soft);
    }

    .game-top-row {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .game-icon {
      width: 32px;
      height: 32px;
      border-radius: 12px;
      background-size: cover;
      background-position: center;
      background-color: rgba(31,41,55,0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
    }

    .game-body {
      display: grid;
      gap: 2px;
    }

    .game-title {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .game-desc {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .game-thumb {
      border-radius: 12px;
      height: 96px;
      background-size: cover;
      background-position: center;
      background-color: rgba(15,23,42,0.9);
    }

    .game-actions {
      display: flex;
      justify-content: flex-end;
    }

    .game-button {
      padding: 0.4rem 0.9rem;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #020617;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
    }

    .game-button:hover {
      filter: brightness(1.05);
    }

    /* Soundboard panel */
    .soundboard-note {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .soundboard-status {
      font-size: 0.8rem;
      color: var(--text-muted);
      min-height: 1em;
      margin-top: 6px;
    }

    .soundboard-grid {
      margin-top: 14px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 10px;
    }

    .sound-pad {
      border-radius: 14px;
      padding: 10px;
      border: 1px solid rgba(148,163,184,0.3);
      background: linear-gradient(135deg, rgba(15,23,42,0.9), rgba(15,23,42,0.98));
      cursor: pointer;
      display: grid;
      gap: 4px;
    }

    .sound-pad .tag {
      font-size: 0.7rem;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .sound-pad .title {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .sound-pad .hint {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .sound-pad.playing {
      box-shadow: 0 0 0 1px var(--accent-soft), 0 0 20px rgba(56,189,248,0.4);
    }

    /* About panel */
    .about-text {
      max-width: 520px;
      font-size: 0.9rem;
      color: var(--text-muted);
      line-height: 1.7;
    }

    @media (max-width: 900px) {
      .app-shell {
        grid-template-columns: 64px minmax(0, 1fr);
        padding: 10px;
      }
      .hero {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 640px) {
      .main {
        padding: 14px;
      }
      .panel-shell {
        padding: 14px;
      }
    }
  
    /* === Futuristic Glow Enhancements === */

    .game-thumb {
      display: none !important;
    }

    .game-card {
      background: linear-gradient(180deg, rgba(15,23,42,0.95), rgba(2,6,23,0.98));
      border: 1px solid rgba(56,189,248,0.35);
      box-shadow:
        0 0 0 1px rgba(56,189,248,0.15),
        0 0 25px rgba(56,189,248,0.18),
        inset 0 0 20px rgba(168,85,247,0.08);
      position: relative;
    }

    .game-card::before {
      content: "";
      position: absolute;
      inset: -1px;
      border-radius: 18px;
      background: linear-gradient(
        120deg,
        transparent 20%,
        rgba(56,189,248,0.35),
        rgba(168,85,247,0.35),
        transparent 80%
      );
      opacity: 0;
      transition: opacity 0.2s ease;
      pointer-events: none;
    }

    .game-card:hover::before {
      opacity: 1;
    }

    .game-card:hover {
      transform: translateY(-4px) scale(1.015);
      box-shadow:
        0 0 0 1px rgba(56,189,248,0.35),
        0 0 45px rgba(56,189,248,0.45),
        0 0 80px rgba(168,85,247,0.35);
    }

    .game-icon {
      box-shadow:
        0 0 0 1px rgba(56,189,248,0.35),
        0 0 16px rgba(56,189,248,0.45);
    }

    .game-button {
      box-shadow:
        0 0 0 1px rgba(56,189,248,0.4),
        0 0 18px rgba(56,189,248,0.55);
    }

    .game-button:hover {
      box-shadow:
        0 0 0 1px rgba(56,189,248,0.6),
        0 0 28px rgba(168,85,247,0.65);
    }

/* === CLEANER UI PASS === */
.game-card {
  background: rgba(15,23,42,0.55) !important;
  border: 1px solid rgba(148,163,184,0.18) !important;
  box-shadow: 0 8px 22px rgba(2,6,23,0.45) !important;
}
.game-card:hover {
  transform: translateY(-2px) !important;
  box-shadow: 0 14px 34px rgba(2,6,23,0.55) !important;
}
.game-card::before { display: none !important; }

.game-button {
  box-shadow: none !important;
}

.panel-shell {
  background: rgba(2,6,23,0.55) !important;
}

.top-tabs button.active {
  box-shadow: 0 6px 16px rgba(96,165,250,0.25) !important;
}


/* === Music panel (iTunes Search API) === */
.music-header-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}
.music-results{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap:12px;
  overflow:auto;
  padding-right:4px;
}
.music-card{
  border-radius:16px;
  border: 1px solid rgba(148,163,184,0.18);
  background: rgba(15,23,42,0.55);
  box-shadow: 0 8px 22px rgba(2,6,23,0.45);
  padding:10px;
  display:grid;
  gap:10px;
}
.music-art{
  border-radius:14px;
  width:100%;
  aspect-ratio: 1 / 1;
  background-size:cover;
  background-position:center;
  background-color: rgba(15,23,42,0.85);
}
.music-meta{
  display:grid;
  gap:2px;
}
.music-track{
  font-size:0.9rem;
  font-weight:650;
}
.music-artist{
  font-size:0.78rem;
  color: var(--text-muted);
}
.music-actions{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:space-between;
}
.music-mini{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:10px 12px;
  border-radius:16px;
  border:1px solid rgba(148,163,184,0.2);
  background: rgba(15,23,42,0.65);
}
.music-mini .now{
  display:grid;
  gap:2px;
  min-width: 0;
}
.music-mini .now .t{
  font-size:0.85rem;
  font-weight:650;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.music-mini .now .a{
  font-size:0.75rem;
  color:var(--text-muted);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.music-mini .controls{
  display:flex;
  gap:8px;
  align-items:center;
  flex: 0 0 auto;
}
.music-link{
  font-size:0.75rem;
  color: var(--accent);
  text-decoration:none;
}
.music-link:hover{ text-decoration:underline; }

</style>
</head>
<body>
  <div class="app-shell">
    <aside class="sidebar">
      <div class="logo-circle">GX</div>
      <nav class="side-nav">
        <button class="active" data-tab-target="home" title="Home">üè†</button>
        <button data-tab-target="games" title="Games">üéÆ</button>
        <button data-tab-target="soundboard" title="Sound Board">üéõÔ∏è</button>
                <button data-tab-target="music" title="Music">üéµ</button>
<button data-tab-target="about" title="About">‚ùî</button>
      </nav>
      <div class="side-clock">
        <div id="system-clock-time" class="side-clock-time"></div>
        <div id="system-clock-date" class="side-clock-date"></div>
      </div>
    </aside>

    <main class="main">
      <div class="main-header">
        <div class="brand-block">
          <div class="brand-title">Galaxy Games</div>
          <div class="brand-subtitle">Launch unblocked games in a single clean dashboard.</div>
          <div class="pill-row">
            <div class="pill">Fast launch</div>
            <div class="pill">Full-screen overlay</div>
            <div class="pill">Soundboard ready</div>
          </div>
        </div>
        <div class="top-tabs">
          <button class="active" data-tab-target="home">Home</button>
          <button data-tab-target="games">Games</button>
          <button data-tab-target="soundboard">Sound Board</button>
          <button data-tab-target="music">Music</button>
          <button data-tab-target="television">Television</button>
          <button data-tab-target="about">About</button>
        </div>
      </div>

      <div class="panel-shell">
        <!-- Home -->
        <section class="tab-panel active" data-tab="home">
          <div class="hero">
            <div>
              <div class="hero-title">
                Welcome to <span class="accent">Galaxy Games</span>
              </div>
              <div class="hero-sub">
                Browse a curated list of web games and launch them in a distraction-free overlay that hides the browser UI.
              </div>
              <div class="hero-actions">
                <button class="btn-primary" id="home-start-btn">Start playing</button>
                <button class="btn-ghost" data-tab-jump="games">View all games</button>
              </div>
            </div>
            <div class="hero-card">
              <div class="hero-card-thumb"></div>
              <div class="hero-card-title">Featured: Lamborghini Sprint</div>
              <div class="hero-card-meta">
                <span>Arcade ‚Ä¢ High score chase</span>
                <span>Instant load via overlay</span>
              </div>
            </div>
          </div>
        </section>

        <!-- Games -->
        <section class="tab-panel" data-tab="games">
          <div class="games-header-row">
            <div>
              <div class="games-title">All games</div>
              <div style="font-size: 0.8rem; color: var(--text-muted);">Search the feed and click any tile to launch.</div>
            </div>
            <div class="search-bar">
              <input id="game-search" type="text" placeholder="Search games..." />
              <span>üîç</span>
            </div>
          </div>
          <div class="game-list" id="game-list"></div>
        </section>

        <!-- Soundboard -->
        <section class="tab-panel" data-tab="soundboard">
          <div style="display: flex; justify-content: space-between; gap: 12px; flex-wrap: wrap; align-items: center;">
            <div>
              <div class="games-title">Sound Board</div>
              <div style="font-size: 0.8rem; color: var(--text-muted);">
                Tap a pad for instant arcade sounds, or launch the original soundboard game overlay.
              </div>
            </div>
            <button class="btn-primary" id="launch-soundboard-btn">Launch original board</button>
          </div>
          <div id="soundboard-remote-note" class="soundboard-note"></div>
          <div id="soundboard-status" class="soundboard-status"></div>
          <div id="soundboard-grid" class="soundboard-grid"></div>
        </section>

        
<!-- Television -->
<section class="tab-panel" data-tab="television">
  <div class="games-title">Television</div>
  <div style="font-size:0.85rem;color:var(--text-muted);margin-bottom:12px;">
    Watch curated network content in a clean embedded viewer.
  </div>

  <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(420px,1fr));gap:16px;">
    <div class="tv-card">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:6px;">
        <div style="font-weight:600;">Disney</div>
        <button class="btn-ghost tv-full-btn" type="button">Full screen</button>
      </div>
      <iframe
        src="https://docs.google.com/presentation/d/1cqMoS7rNvOX77938GusdWNi6mYVPOfETCVsAVW9I9ps/preview?slide=id.g2caa1804f1f_0_71"
        style="width:100%;height:320px;border-radius:14px;border:1px solid rgba(148,163,184,0.2);"
        allowfullscreen>
      </iframe>
    </div>

    <div class="tv-card">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:6px;">
        <div style="font-weight:600;">Paramount</div>
        <button class="btn-ghost tv-full-btn" type="button">Full screen</button>
      </div>
      <iframe
        src="https://docs.google.com/presentation/d/1CiZMdBm677M7EIus7gT89WPxwYPzXJQgwmXGv3sLAaw/preview?slide=id.g1b71f8bdb3c_2_77"
        style="width:100%;height:320px;border-radius:14px;border:1px solid rgba(148,163,184,0.2);"
        allowfullscreen>
      </iframe>
    </div>
  </div>
</section>
        <!-- Music -->
        <section class="tab-panel" data-tab="music">
          <div class="music-header-row">
            <div>
              <div class="games-title">Music</div>
              <div style="font-size: 0.8rem; color: var(--text-muted);">Search iTunes, play 30-second previews, and open tracks in iTunes.</div>
            </div>
            <div class="search-bar">
              <input id="music-search" type="text" placeholder="Search songs or artists..." />
              <span>üîç</span>
            </div>
          </div>

          <div id="music-mini" class="music-mini" style="display:none;">
            <div class="now">
              <div class="t" id="music-now-track">Now playing</div>
              <div class="a" id="music-now-artist"></div>
            </div>
            <div class="controls">
              <button class="btn-ghost" id="music-stop-btn" type="button">Stop</button>
              <a class="music-link" id="music-open-link" href="#" target="_blank" rel="noopener">Open in iTunes</a>
            </div>
          </div>

          <div id="music-status" style="font-size:0.8rem;color:var(--text-muted);min-height:1em;"></div>
          <div class="music-results" id="music-results"></div>
        </section>



        <!-- About -->
        <section class="tab-panel" data-tab="about">
          <div class="games-title">About this launcher</div>
          <div class="about-text">
            Galaxy Games is a single-page launcher that pulls a public JSON feed of web games and opens them in a full-screen overlay. 
            Use the sidebar to jump between games, the sound board, and basic info. The entire UI is self-contained in this HTML file,
            so you can host it anywhere or run it locally.
          </div>
        </section>
      </div>
    </main>
  </div>

  <script>
    // Simple tab system for sidebar + top pills
    (function() {
      function setActive(tab) {
        document.querySelectorAll('[data-tab]').forEach(p => {
          p.classList.toggle('active', p.getAttribute('data-tab') === tab);
        });
        document.querySelectorAll('[data-tab-target]').forEach(btn => {
          btn.classList.toggle('active', btn.getAttribute('data-tab-target') === tab);
        });
      }

      document.addEventListener('click', function(e) {
        const btn = e.target.closest('[data-tab-target]');
        if (btn) {
          const tab = btn.getAttribute('data-tab-target');
          setActive(tab);
        }
        const jump = e.target.closest('[data-tab-jump]');
        if (jump) {
          const tab = jump.getAttribute('data-tab-jump');
          setActive(tab);
        }
      });

      const startBtn = document.getElementById('home-start-btn');
      if (startBtn) {
        startBtn.addEventListener('click', function() {
          setActive('games');
          const search = document.getElementById('game-search');
          if (search) search.focus();
        });
      }
    })();
  </script>

  <script>
  (function() {
    const ZONES_URL = "https://cdn.jsdelivr.net/gh/Notrexed/assets@latest/allzone.json";
    const COVER_URL = "https://cdn.jsdelivr.net/gh/Notrexed/covers@main";
    const HTML_URL  = "https://cdn.jsdelivr.net/gh/Notrexed/html@latest";

    const gameListEl   = document.getElementById("game-list");
    const searchInput  = document.getElementById("game-search");

    const overlayId    = "game-overlay";
    const iframeId     = "game-iframe";

    let zones = [];
    let filtered = [];
    let soundboardZone = null;
    let currentZone = null;

    // ---------- Overlay (fullscreen, edge-to-edge iframe) ----------
    function createOverlayIfNeeded() {
      if (document.getElementById(overlayId)) return;

      const overlay = document.createElement("div");
      overlay.id = overlayId;
      overlay.style.position = "fixed";
      overlay.style.inset = "0";
      overlay.style.background = "rgba(0,0,0,0.94)";
      overlay.style.backdropFilter = "blur(10px)";
      overlay.style.display = "none";
      overlay.style.alignItems = "stretch";
      overlay.style.justifyContent = "center";
      overlay.style.zIndex = "9999";

      const iframe = document.createElement("iframe");
      iframe.id = iframeId;
      iframe.style.border = "none";
      iframe.style.width = "100%";
      iframe.style.height = "100%";
      iframe.style.background = "#000";

      const closeBtn = document.createElement("button");
      closeBtn.textContent = "√ó";
      closeBtn.style.position = "fixed";
      closeBtn.style.top = "18px";
      closeBtn.style.right = "24px";
      closeBtn.style.width = "36px";
      closeBtn.style.height = "36px";
      closeBtn.style.borderRadius = "999px";
      closeBtn.style.border = "none";
      closeBtn.style.background = "rgba(15,23,42,0.85)";
      closeBtn.style.color = "#e5e7eb";
      closeBtn.style.fontSize = "22px";
      closeBtn.style.cursor = "pointer";
      closeBtn.style.zIndex = "10000";

      
      const fsBtn = document.createElement("button");
      fsBtn.textContent = "‚õ∂";
      fsBtn.title = "Toggle fullscreen";
      fsBtn.style.position = "fixed";
      fsBtn.style.top = "18px";
      fsBtn.style.right = "68px";
      fsBtn.style.width = "36px";
      fsBtn.style.height = "36px";
      fsBtn.style.borderRadius = "999px";
      fsBtn.style.border = "none";
      fsBtn.style.background = "rgba(15,23,42,0.85)";
      fsBtn.style.color = "#e5e7eb";
      fsBtn.style.fontSize = "16px";
      fsBtn.style.cursor = "pointer";
      fsBtn.style.zIndex = "10000";

      fsBtn.addEventListener("click", toggleOverlayFullscreen);
closeBtn.addEventListener("click", closeOverlay);
      iframe.setAttribute("allow", "accelerometer; autoplay; fullscreen; clipboard-read; clipboard-write; gamepad;");
      iframe.referrerPolicy = "no-referrer";
      overlay.appendChild(iframe);
      overlay.appendChild(closeBtn);
      overlay.appendChild(fsBtn);
      document.body.appendChild(overlay);

      overlay.addEventListener("click", (e) => {
        if (e.target === overlay) closeOverlay();
      });

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closeOverlay();
      });
    }


    function toggleOverlayFullscreen() {
      const overlay = document.getElementById(overlayId);
      if (!overlay) return;
      const isFs = document.fullscreenElement === overlay;
      if (!document.fullscreenEnabled) return;
      if (isFs) {
        document.exitFullscreen().catch(() => {});
      } else {
        overlay.requestFullscreen().catch(() => {});
      }
    }

    function openUrlOverlay(url, label) {
      if (!url) return;
      createOverlayIfNeeded();
      const overlay = document.getElementById(overlayId);
      const iframe  = document.getElementById(iframeId);
      if (!overlay || !iframe) return;

      overlay.style.display = "flex";
      document.body.style.overflow = "hidden";

      // For direct embeds (movies/TV), use iframe src
      iframe.src = url;

      // Optional XP hook
      if (typeof window.earnXpForGame === "function") {
        window.earnXpForGame(1);
      }
    }


    function buildZoneHtmlUrl(z) {
      let u = (z && z.url) ? String(z.url) : "";
      u = u.replace("{HTML_URL}", HTML_URL).replace("{COVER_URL}", COVER_URL);
      return u;
    }

    function buildCoverUrl(z) {
      let c = (z && z.cover) ? String(z.cover) : "";
      c = c.replace("{COVER_URL}", COVER_URL).replace("{HTML_URL}", HTML_URL);
      return c;
    }

    function openOverlay(zone) {
      if (!zone) return;
      currentZone = zone;
      createOverlayIfNeeded();

      const overlay = document.getElementById(overlayId);
      const iframe  = document.getElementById(iframeId);
      if (!overlay || !iframe) return;

      overlay.style.display = "flex";
      document.body.style.overflow = "hidden";

      const url = buildZoneHtmlUrl(zone);

      // Award XP when a game is launched
      if (typeof window.earnXpForGame === "function") {
        window.earnXpForGame(2);
      }

      // Fetch HTML then doc.write into iframe so scripts run properly
      fetch(url + "?t=" + Date.now())
        .then(res => res.text())
        .then(html => {
          const doc = iframe.contentWindow.document;
          doc.open();
          doc.write(html);
          doc.close();
        })
        .catch(err => {
          console.error("Failed to load game", err);
          const doc = iframe.contentWindow.document;
          doc.open();
          doc.write(
            "<body style='margin:0;display:flex;align-items:center;justify-content:center;background:#020617;color:#e5e7eb;font-family:sans-serif;'>Failed to load game.</body>"
          );
          doc.close();
        });
    }

    function closeOverlay() {
      const overlay = document.getElementById(overlayId);
      const iframe  = document.getElementById(iframeId);
      if (overlay) overlay.style.display = "none";
      if (iframe && iframe.contentWindow) {
        try {
          const doc = iframe.contentWindow.document;
          doc.open();
          doc.write("<!doctype html><title></title>");
          doc.close();
        } catch (e) {}
      }
      try { iframe.src = "about:blank"; } catch(e) {}
      document.body.style.overflow = "";
      currentZone = null;
    }

    function isSoundboardZone(z) {
      const name = (z && z.name ? z.name : "").toLowerCase();
      return name.includes("sound") && name.includes("board");
    }

    // ---------- Card rendering ----------
    function renderList(list) {
      if (!gameListEl) return;
      gameListEl.innerHTML = "";

      if (!list || list.length === 0) {
        gameListEl.innerHTML =
          "<div style='color: var(--text-muted); font-size: 14px;'>No games found.</div>";
        return;
      }

      list.forEach(z => {
        const name = (z && z.name ? z.name : "").toLowerCase();
        if (name.includes("ovo")) return; // remove all OvO entries
        if (isSoundboardZone(z)) {
          soundboardZone = z;
          return;
        }
        if (z.id === -1) return; // skip discord credit row in JSON

        const card = document.createElement("div");
        card.className = "game-card";
        card.dataset.title = (z.name || "").toLowerCase();

        const topRow = document.createElement("div");
        topRow.className = "game-top-row";

        const icon = document.createElement("div");
        icon.className = "game-icon";
        const coverUrl = buildCoverUrl(z);
        if (coverUrl) {
          icon.style.backgroundImage = `url(${coverUrl})`;
        } else {
          icon.textContent = "??";
        }

        const body = document.createElement("div");
        body.className = "game-body";

        const title = document.createElement("div");
        title.className = "game-title";
        title.textContent = z.name || "Untitled Game";

        const desc = document.createElement("div");
        desc.className = "game-desc";
        if (z.author) {
          desc.textContent = z.author;
        } else if (z.id !== undefined && z.id !== null) {
          desc.textContent = "ID " + z.id;
        } else {
          desc.textContent = "Click to play";
        }

        body.appendChild(title);
        body.appendChild(desc);
        topRow.appendChild(icon);
        topRow.appendChild(body);

        const thumb = document.createElement("div");
        thumb.className = "game-thumb";
        if (coverUrl) thumb.style.backgroundImage = `url(${coverUrl})`;

        const actions = document.createElement("div");
        actions.className = "game-actions";

        const btn = document.createElement("button");
        btn.className = "game-button";
        btn.textContent = "Play";

        btn.addEventListener("click", (e) => {
          e.stopPropagation();
          openOverlay(z);
        });

        actions.appendChild(btn);
        card.appendChild(topRow);
        card.appendChild(thumb);
        card.appendChild(actions);

        card.addEventListener("click", () => openOverlay(z));

        gameListEl.appendChild(card);
      });
    }

    function applyFilter(query) {
      const q = (query || "").trim().toLowerCase();
      const base = zones.filter((z) => !isSoundboardZone(z));
      filtered = !q
        ? base
        : base.filter((z) => (z.name || "").toLowerCase().includes(q));
      renderList(filtered);
    }

    async function initGames() {
      if (!gameListEl) return;

      try {
        const res = await fetch(ZONES_URL + "?t=" + Date.now());
        const data = await res.json();
        zones = Array.isArray(data) ? data : [];
        soundboardZone = zones.find((z) => isSoundboardZone(z)) || null;
        filtered = zones.filter((z) => !isSoundboardZone(z));
        renderList(filtered);
      } catch (e) {
        console.error("Failed to load zones", e);
        gameListEl.innerHTML =
          "<div style='color: var(--text-muted); font-size: 14px;'>Failed to load games.</div>";
      }

      if (searchInput) {
        searchInput.addEventListener("input", (e) => {
          applyFilter(e.target.value || "");
        });
      }
    }

    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", initGames);
    } else {
      initGames();
    }

    // Expose helpers so the Sound Board tab can launch the original game
    window.openGameOverlay = openOverlay;
    window.getSoundboardZone = () => soundboardZone;
    window.openUrlOverlay = openUrlOverlay;
  })();
</script>


  <script>
  (function () {
    const launchBtn = document.getElementById("launch-soundboard-btn");
    const remoteNote = document.getElementById("soundboard-remote-note");
    const pads = [
      {
        label: "Laser Sweep",
        hint: "Sharp arcade zap",
        tag: "Arcade",
        tones: [
          { freq: 760, duration: 0.18, type: "sawtooth" },
          { freq: 280, duration: 0.22, type: "sawtooth", delay: 0.02 },
        ],
      },
      {
        label: "Coin Pickup",
        hint: "Retro reward ping",
        tag: "Retro",
        tones: [
          { freq: 980, duration: 0.12, type: "triangle" },
          { freq: 1280, duration: 0.16, type: "square", delay: 0.02 },
        ],
      },
      {
        label: "Air Horn",
        hint: "Hype blast",
        tag: "Hype",
        tones: [{ freq: 220, duration: 0.45, type: "square", peak: 0.55 }],
      },
      {
        label: "Ping",
        hint: "Chat alert",
        tag: "Soft",
        tones: [
          { freq: 660, duration: 0.12, type: "sine" },
          { freq: 880, duration: 0.16, type: "triangle", delay: 0.05 },
        ],
      },
      {
        label: "Power Down",
        hint: "Descending sci-fi",
        tag: "Sci-Fi",
        tones: [
          { freq: 640, duration: 0.16, type: "triangle" },
          { freq: 320, duration: 0.22, type: "sine", delay: 0.02 },
        ],
      },
      {
        label: "Drum Hit",
        hint: "Kick thump",
        tag: "Beat",
        tones: [
          { freq: 90, duration: 0.24, type: "sine", peak: 0.6 },
          { freq: 60, duration: 0.14, type: "sine", delay: 0.02, peak: 0.45 },
        ],
      },
    ];

    const grid = document.getElementById("soundboard-grid");
    const statusEl = document.getElementById("soundboard-status");
    let audioCtx = null;

    function updateRemoteStatus() {
      if (!remoteNote) return;
      const zone = typeof window.getSoundboardZone === "function" ? window.getSoundboardZone() : null;
      if (zone) {
        remoteNote.textContent = `Ready: "${zone.name}" is loaded from Games and opens here now.`;
        remoteNote.style.color = "var(--accent)";
      } else {
        remoteNote.textContent = "Looking for the original Sound Board game in the Games feed...";
        remoteNote.style.color = "var(--text-muted)";
      }
    }

    function openRemoteSoundboard() {
      const zone = typeof window.getSoundboardZone === "function" ? window.getSoundboardZone() : null;
      if (!zone) {
        setSoundStatus("Original Sound Board isn't loaded yet.", "#ef4444");
        return;
      }
      if (typeof window.openGameOverlay === "function") {
        window.openGameOverlay(zone);
        setSoundStatus("Opening original Sound Board...", "var(--accent)");
      } else {
        setSoundStatus("Cannot open overlay right now.", "#ef4444");
      }
    }

    function setSoundStatus(msg, color = "var(--text-muted)") {
      if (!statusEl) return;
      statusEl.textContent = msg;
      statusEl.style.color = color;
      if (msg) {
        setTimeout(() => {
          if (statusEl.textContent === msg) statusEl.textContent = "";
        }, 2200);
      }
    }

    function getAudioContext() {
      if (audioCtx) {
        if (audioCtx.state === "suspended") audioCtx.resume();
        return audioCtx;
      }
      const Ctx = window.AudioContext || window.webkitAudioContext;
      if (!Ctx) return null;
      audioCtx = new Ctx();
      return audioCtx;
    }

    function playPad(pad, el) {
      const ctx = getAudioContext();
      if (!ctx) {
        setSoundStatus("Audio not supported in this browser.", "#ef4444");
        return;
      }

      let start = ctx.currentTime;
      pad.tones.forEach((tone) => {
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        const duration = tone.duration || 0.2;
        const delay = tone.delay || 0;
        const peak = tone.peak || 0.35;
        osc.type = tone.type || "sine";
        osc.frequency.setValueAtTime(tone.freq || 440, start);
        gain.gain.setValueAtTime(0.001, start);
        gain.gain.exponentialRampToValueAtTime(peak, start + 0.02);
        gain.gain.exponentialRampToValueAtTime(0.0001, start + duration);
        osc.connect(gain).connect(ctx.destination);
        osc.start(start);
        osc.stop(start + duration + 0.05);
        start += duration + delay;
      });

      if (el) {
        el.classList.add("playing");
        setTimeout(() => el.classList.remove("playing"), 200);
      }
      setSoundStatus(`Playing ${pad.label}`, "var(--accent)");
    }

    function renderSoundBoard() {
      if (!grid) return;
      grid.innerHTML = "";
      pads.forEach((pad) => {
        const el = document.createElement("div");
        el.className = "sound-pad";
        el.innerHTML = `
          <div class="tag">${pad.tag}</div>
          <div class="title">${pad.label}</div>
          <div class="hint">${pad.hint}</div>
        `;
        el.addEventListener("click", () => playPad(pad, el));
        grid.appendChild(el);
      });
    }

    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", renderSoundBoard);
    } else {
      renderSoundBoard();
    }

    updateRemoteStatus();
    if (launchBtn) launchBtn.addEventListener("click", openRemoteSoundboard);
    setInterval(updateRemoteStatus, 1500);
  })();
</script>

  





































  <script>

  (function(){
    const searchEl = document.getElementById("music-search");
    const resultsEl = document.getElementById("music-results");
    const statusEl = document.getElementById("music-status");
    const miniEl = document.getElementById("music-mini");
    const nowTrackEl = document.getElementById("music-now-track");
    const nowArtistEl = document.getElementById("music-now-artist");
    const stopBtn = document.getElementById("music-stop-btn");
    const openLink = document.getElementById("music-open-link");

    const audio = new Audio();
    audio.preload = "none";
    let debounce = null;

    function setStatus(msg){
      if (!statusEl) return;
      statusEl.textContent = msg || "";
    }

    function showMini(track){
      if (!miniEl) return;
      miniEl.style.display = "flex";
      if (nowTrackEl) nowTrackEl.textContent = track?.trackName || "Now playing";
      if (nowArtistEl) nowArtistEl.textContent = track?.artistName || "";
      if (openLink) {
        openLink.href = track?.trackViewUrl || "#";
        openLink.style.pointerEvents = track?.trackViewUrl ? "auto" : "none";
        openLink.style.opacity = track?.trackViewUrl ? "1" : "0.5";
      }
    }

    function stop(){
      audio.pause();
      audio.currentTime = 0;
      setStatus("Stopped.");
    }

    async function search(term){
      const q = (term || "").trim();
      if (!resultsEl) return;
      resultsEl.innerHTML = "";
      if (!q) {
        setStatus("Type to search for songs or artists.");
        return;
      }
      setStatus("Searching‚Ä¶");
      try {
        const url = "https://itunes.apple.com/search?media=music&entity=song&limit=24&term=" + encodeURIComponent(q);
        const res = await fetch(url, { method: "GET" });
        const data = await res.json();
        const list = Array.isArray(data?.results) ? data.results : [];
        if (list.length === 0) {
          setStatus("No results.");
          return;
        }
        setStatus("Showing " + list.length + " results.");
        list.forEach((t) => {
          const card = document.createElement("div");
          card.className = "music-card";

          const art = document.createElement("div");
          art.className = "music-art";
          const img = (t.artworkUrl100 || "").replace("100x100bb", "400x400bb");
          if (img) art.style.backgroundImage = "url(" + img + ")";

          const meta = document.createElement("div");
          meta.className = "music-meta";
          meta.innerHTML = `
            <div class="music-track" title="${(t.trackName||"").replace(/"/g,'&quot;')}">${t.trackName || "Untitled"}</div>
            <div class="music-artist">${t.artistName || ""}</div>
          `;

          const actions = document.createElement("div");
          actions.className = "music-actions";

          const playBtn = document.createElement("button");
          playBtn.className = "game-button";
          playBtn.type = "button";
          playBtn.textContent = "Play preview";

          const link = document.createElement("a");
          link.className = "music-link";
          link.href = t.trackViewUrl || "#";
          link.target = "_blank";
          link.rel = "noopener";
          link.textContent = "Details";

          playBtn.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            if (!t.previewUrl) {
              setStatus("No preview available.");
              return;
            }
            audio.src = t.previewUrl;
            audio.play().catch(()=>{});
            showMini(t);
            setStatus("Playing preview.");
          });

          actions.appendChild(playBtn);
          actions.appendChild(link);

          card.appendChild(art);
          card.appendChild(meta);
          card.appendChild(actions);
          resultsEl.appendChild(card);
        });
      } catch (e) {
        console.error(e);
        setStatus("Search failed (network or CORS).");
      }
    }

    if (stopBtn) stopBtn.addEventListener("click", stop);
    if (searchEl) {
      searchEl.addEventListener("input", (e) => {
        const v = e.target.value || "";
        clearTimeout(debounce);
        debounce = setTimeout(() => search(v), 250);
      });
    }

    setStatus("Type to search for songs or artists.");
  })();

</script>

<script>
  function updateSystemClock() {
    const timeEl = document.getElementById('system-clock-time');
    const dateEl = document.getElementById('system-clock-date');
    if (!timeEl || !dateEl) return;

    const now = new Date();

    let hours = now.getHours();
    const minutes = now.getMinutes().toString().padStart(2, '0');
    const ampm = hours >= 12 ? 'PM' : 'AM';
    hours = hours % 12;
    if (hours === 0) hours = 12;
    timeEl.textContent = hours + ':' + minutes + ' ' + ampm;

    const month = (now.getMonth() + 1).toString().padStart(2, '0');
    const day = now.getDate().toString().padStart(2, '0');
    const year = now.getFullYear();
    dateEl.textContent = month + '/' + day + '/' + year;
  }

  document.addEventListener('DOMContentLoaded', function () {
    updateSystemClock();
    setInterval(updateSystemClock, 30000);
  });
</script>
</body></html>
</body>
</html>
